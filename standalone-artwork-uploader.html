<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artwork Uploader & Gang Sheet Builder</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background-color: #111827;
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
        }

        #root {
            height: 100vh;
        }

        .workflow-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            padding: 2rem;
            background-color: #1f2937;
            border-bottom: 1px solid #374151;
        }

        .workflow-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .step-circle {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .step-circle.active {
            background-color: #3b82f6;
            color: white;
        }

        .step-circle.inactive {
            background-color: #374151;
            color: white;
        }

        .step-circle.completed {
            background-color: #22c55e;
            color: white;
        }

        .step-connector {
            width: 3rem;
            height: 2px;
            margin-top: -1rem;
            transition: all 0.3s ease;
        }

        .step-connector.active {
            background-color: #3b82f6;
        }

        .step-connector.inactive {
            background-color: #374151;
        }

        .sidebar {
            width: 280px;
            background-color: #1f2937;
            height: 100vh;
            border-right: 1px solid #374151;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #374151;
        }

        .sidebar-logo-icon {
            width: 40px;
            height: 40px;
            background-color: #3b82f6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .nav-button {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
            text-align: left;
            width: 100%;
            background: transparent;
            color: #9ca3af;
        }

        .nav-button.active {
            background-color: #3b82f6;
            color: #ffffff;
        }

        .nav-button:hover:not(.active) {
            background-color: #374151;
            color: #ffffff;
        }

        .canvas-area {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #6b7280;
            padding: 2rem;
        }

        .gang-sheet {
            background-color: #ffff00;
            border: 2px solid #000000;
            position: relative;
            background-image: 
                linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px),
                linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .safety-warning {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.95);
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            border: 2px solid #f59e0b;
            max-width: 300px;
            color: #4b5563;
        }

        .modal-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }

        .modal-content {
            background-color: #1f2937;
            border-radius: 0.75rem;
            padding: 2rem;
            border: 1px solid #374151;
            max-width: 80rem;
            width: 90vw;
            max-height: 90vh;
            overflow: auto;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
        }

        .product-card {
            background-color: #374151;
            border-radius: 0.75rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .product-card:hover {
            background-color: #4b5563;
            border-color: #3b82f6;
            transform: translateY(-2px);
        }

        .color-grid {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 0.5rem;
            margin: 2rem 0;
        }

        .color-swatch {
            width: 50px;
            height: 50px;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            border: 2px solid #6b7280;
        }

        .color-swatch.selected {
            border-color: #3b82f6;
            border-width: 3px;
        }

        .toolbar {
            background-color: #1f2937;
            padding: 1rem;
            border-bottom: 1px solid #374151;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background-color: #3b82f6;
            color: #ffffff;
        }

        .btn-primary:hover {
            background-color: #2563eb;
        }

        .btn-success {
            background-color: #22c55e;
            color: #ffffff;
        }

        .btn-success:hover {
            background-color: #16a34a;
        }

        .btn-secondary {
            background-color: #4b5563;
            color: #ffffff;
        }

        .btn-secondary:hover {
            background-color: #6b7280;
        }

        .properties-panel {
            width: 320px;
            background-color: #1f2937;
            border-left: 1px solid #374151;
            padding: 1.5rem;
            overflow: auto;
        }

        .range-input {
            width: 100%;
            accent-color: #3b82f6;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef } = React;

        // Professional colors data
        const PROFESSIONAL_COLORS = [
            { id: 'white', name: 'White', color: '#FFFFFF' },
            { id: 'black', name: 'Black', color: '#000000' },
            { id: 'cream', name: 'Cream', color: '#F5F5DC' },
            { id: 'light-yellow', name: 'Light Yellow', color: '#FFFFE0' },
            { id: 'yellow', name: 'Yellow', color: '#FFFF00' },
            { id: 'lime', name: 'Lime', color: '#00FF00' },
            { id: 'orange', name: 'Orange', color: '#FFA500' },
            { id: 'light-green', name: 'Light Green', color: '#90EE90' },
            { id: 'pink', name: 'Pink', color: '#FFC0CB' },
            { id: 'light-grey', name: 'Light Grey', color: '#D3D3D3' },
            { id: 'grey', name: 'Grey', color: '#808080' },
            { id: 'charcoal', name: 'Charcoal', color: '#36454F' },
            { id: 'light-blue', name: 'Light Blue', color: '#ADD8E6' },
            { id: 'blue', name: 'Blue', color: '#0000FF' },
            { id: 'light-blue-2', name: 'Light Blue', color: '#87CEEB' },
            { id: 'royal-blue', name: 'Royal Blue', color: '#4169E1' },
            { id: 'navy', name: 'Navy', color: '#000080' },
            { id: 'dark-blue', name: 'Dark Blue', color: '#00008B' },
            { id: 'lime-green', name: 'Lime Green', color: '#32CD32' },
            { id: 'green', name: 'Green', color: '#008000' },
            { id: 'dark-green', name: 'Dark Green', color: '#006400' },
            { id: 'light-pink', name: 'Light Pink', color: '#FFB6C1' },
            { id: 'hot-pink', name: 'Hot Pink', color: '#FF69B4' },
            { id: 'red', name: 'Red', color: '#FF0000' },
            { id: 'maroon', name: 'Maroon', color: '#800000' },
            { id: 'brown', name: 'Brown', color: '#A52A2A' },
            { id: 'purple', name: 'Purple', color: '#800080' }
        ];

        const PRODUCTS = [
            { id: 'full-colour', name: 'Full Colour Transfers', description: 'Full-Colour screen printed heat applied transfers' },
            { id: 'full-colour-metallic', name: 'Full Colour Metallic', description: 'Full-Colour screen printed with metallic finish' },
            { id: 'full-colour-hd', name: 'Full Colour HD', description: 'High-definition full-colour screen printed transfers' },
            { id: 'single-colour', name: 'Single Colour Transfers', description: 'Screen printed using our off-the-shelf colour range' },
            { id: 'dtf', name: 'DTF - Digital Film Transfers', description: 'Small order digital heat transfers' },
            { id: 'uvdtf', name: 'UV DTF', description: 'Hard Surface Transfers' },
            { id: 'custom-badges', name: 'Custom Badges', description: 'Polyester textile woven badges' },
            { id: 'applique-badges', name: 'Applique Badges', description: 'Fabric applique badges' },
            { id: 'reflective', name: 'Reflective Transfers', description: 'Our silver reflective helps enhance the visibility of the wearer at night' },
            { id: 'zero-single', name: 'ZERO Single Colour Transfers', description: 'Zero inks are super stretchy and do not bleed!' },
            { id: 'sublimation', name: 'Sublimation Transfers', description: 'Sublimation heat transfers are designed for full colour decoration of white, 100% polyester' },
            { id: 'zero-silicone', name: 'Zero Silicone Transfers', description: 'Silicone-free transfers' }
        ];

        const WORKFLOW_STEPS = [
            { id: 1, name: 'Upload Logo', description: 'Upload your logo file' },
            { id: 2, name: 'Template Size', description: 'Select template dimensions' },
            { id: 3, name: 'Garment Color', description: 'Choose garment colors' },
            { id: 4, name: 'Canvas/PDF', description: 'Position and edit artwork' },
            { id: 5, name: 'Artwork', description: 'Generate final artwork' }
        ];

        function WorkflowSteps({ currentStep }) {
            return (
                <div className="workflow-header">
                    {WORKFLOW_STEPS.map((step, index) => (
                        <React.Fragment key={step.id}>
                            <div className="workflow-step">
                                <div className={`step-circle ${index <= currentStep ? 'active' : 'inactive'} ${index < currentStep ? 'completed' : ''}`}>
                                    {index < currentStep ? '‚úì' : step.id}
                                </div>
                                <div style={{ textAlign: 'center', maxWidth: '120px' }}>
                                    <div style={{
                                        fontSize: '0.875rem',
                                        fontWeight: '600',
                                        color: index <= currentStep ? '#ffffff' : '#9ca3af',
                                        marginBottom: '0.25rem'
                                    }}>
                                        {step.name}
                                    </div>
                                    <div style={{
                                        fontSize: '0.75rem',
                                        color: '#6b7280',
                                        lineHeight: '1.2'
                                    }}>
                                        {step.description}
                                    </div>
                                </div>
                            </div>
                            {index < WORKFLOW_STEPS.length - 1 && (
                                <div className={`step-connector ${index < currentStep ? 'active' : 'inactive'}`} />
                            )}
                        </React.Fragment>
                    ))}
                </div>
            );
        }

        function Sidebar({ currentStep, onStepClick }) {
            const sidebarSections = [
                { id: 'upload', label: 'Upload Logo', icon: 'üìÅ', step: 0 },
                { id: 'template', label: 'Template Size', icon: 'üìê', step: 1 },
                { id: 'color', label: 'Garment Color', icon: 'üé®', step: 2 },
                { id: 'canvas', label: 'Canvas/PDF', icon: 'üñºÔ∏è', step: 3 },
                { id: 'artwork', label: 'Artwork', icon: 'üéØ', step: 4 }
            ];

            return (
                <div className="sidebar">
                    {/* Logo */}
                    <div className="sidebar-logo">
                        <div className="sidebar-logo-icon">üé®</div>
                        <div>
                            <div style={{ fontSize: '1.125rem', fontWeight: '700', color: '#ffffff', lineHeight: '1.2' }}>
                                Complete Transfers
                            </div>
                            <div style={{ fontSize: '0.75rem', color: '#9ca3af', lineHeight: '1' }}>
                                No Mess, Just Press
                            </div>
                        </div>
                    </div>

                    {/* Navigation */}
                    <nav style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>
                        {sidebarSections.map((section) => (
                            <button
                                key={section.id}
                                onClick={() => onStepClick(section.step)}
                                className={`nav-button ${currentStep === section.step ? 'active' : ''}`}
                            >
                                <span style={{ fontSize: '1rem' }}>{section.icon}</span>
                                {section.label}
                            </button>
                        ))}
                    </nav>

                    {/* Pre-flight Check */}
                    <div style={{
                        marginTop: '2rem',
                        padding: '1rem',
                        backgroundColor: '#374151',
                        borderRadius: '0.5rem',
                        border: '1px solid #4b5563'
                    }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.5rem' }}>
                            <span style={{ fontSize: '1rem' }}>‚ö†Ô∏è</span>
                            <span style={{ fontSize: '0.875rem', fontWeight: '600', color: '#fbbf24' }}>
                                Pre-flight Check
                            </span>
                        </div>
                        <p style={{ fontSize: '0.75rem', color: '#d1d5db', margin: 0, lineHeight: '1.4' }}>
                            Select a logo to run pre-flight checks.
                        </p>
                    </div>

                    {/* Product Selector */}
                    <div style={{
                        marginTop: '1rem',
                        padding: '1rem',
                        backgroundColor: '#374151',
                        borderRadius: '0.5rem',
                        border: '1px solid #4b5563'
                    }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.75rem' }}>
                            <span style={{ fontSize: '1rem' }}>üéØ</span>
                            <span style={{ fontSize: '0.875rem', fontWeight: '600', color: '#ffffff' }}>
                                Product Selector
                            </span>
                        </div>
                        <select style={{
                            width: '100%',
                            padding: '0.5rem',
                            borderRadius: '0.375rem',
                            border: '1px solid #6b7280',
                            backgroundColor: '#1f2937',
                            color: '#ffffff',
                            fontSize: '0.875rem'
                        }}>
                            <option>Choose Template</option>
                            <option>Full Colour Transfers</option>
                            <option>DTF Transfers</option>
                            <option>UV DTF</option>
                        </select>
                        <button className="btn btn-primary" style={{ width: '100%', marginTop: '0.5rem', fontSize: '0.75rem' }}>
                            Change
                        </button>
                    </div>
                </div>
            );
        }

        function ProductSelection({ onProductSelected }) {
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [selectedProductId, setSelectedProductId] = useState('');

            const handleProductSelect = (productId) => {
                setSelectedProductId(productId);
                setIsModalOpen(true);
            };

            const handleConfirm = () => {
                onProductSelected(selectedProductId);
                setIsModalOpen(false);
            };

            const selectedProduct = PRODUCTS.find(p => p.id === selectedProductId);

            return (
                <>
                    <div className="modal-overlay">
                        <div className="modal-content">
                            {/* Header */}
                            <div style={{ textAlign: 'center', marginBottom: '3rem' }}>
                                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '1rem', marginBottom: '1.5rem' }}>
                                    <div style={{
                                        width: '60px', height: '40px',
                                        background: 'linear-gradient(45deg, #3b82f6, #8b5cf6)',
                                        borderRadius: '8px', display: 'flex', alignItems: 'center', justifyContent: 'center'
                                    }}>
                                        <div style={{
                                            width: '40px', height: '20px',
                                            background: 'linear-gradient(45deg, #fbbf24, #f59e0b)',
                                            borderRadius: '4px', position: 'relative'
                                        }}>
                                            <div style={{
                                                position: 'absolute', top: '2px', left: '2px',
                                                width: '36px', height: '16px',
                                                background: 'linear-gradient(45deg, #ef4444, #dc2626)',
                                                borderRadius: '2px'
                                            }} />
                                        </div>
                                    </div>
                                    <div>
                                        <div style={{ fontSize: '1.5rem', fontWeight: '700', color: '#ffffff' }}>
                                            COMPLETE TRANSFERS
                                        </div>
                                        <div style={{ fontSize: '0.875rem', color: '#9ca3af' }}>
                                            NO MESS, JUST PRESS
                                        </div>
                                    </div>
                                </div>
                                <h1 style={{ fontSize: '2rem', fontWeight: '600', color: '#ffffff', margin: '0 0 0.5rem 0' }}>
                                    Select Product Type
                                </h1>
                                <p style={{ color: '#9ca3af', fontSize: '1rem', margin: 0 }}>
                                    Choose the type of product you want to create artwork for
                                </p>
                            </div>

                            {/* Products Grid */}
                            <div className="product-grid">
                                {PRODUCTS.map((product) => (
                                    <div
                                        key={product.id}
                                        onClick={() => handleProductSelect(product.id)}
                                        className="product-card"
                                    >
                                        <div style={{
                                            width: '60px', height: '60px',
                                            backgroundColor: '#4b5563', borderRadius: '0.5rem',
                                            marginBottom: '1rem', display: 'flex',
                                            alignItems: 'center', justifyContent: 'center',
                                            fontSize: '1.5rem'
                                        }}>
                                            üé®
                                        </div>
                                        <h3 style={{
                                            fontSize: '1.125rem', fontWeight: '600',
                                            color: '#ffffff', margin: '0 0 0.5rem 0'
                                        }}>
                                            {product.name}
                                        </h3>
                                        <p style={{
                                            fontSize: '0.875rem', color: '#9ca3af',
                                            margin: '0 0 1.5rem 0', lineHeight: '1.4'
                                        }}>
                                            {product.description}
                                        </p>
                                        <button className="btn btn-primary" style={{ width: '100%' }}>
                                            Select
                                        </button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Confirmation Modal */}
                    {isModalOpen && selectedProduct && (
                        <div className="modal-overlay" style={{ zIndex: 60 }}>
                            <div style={{
                                backgroundColor: '#1f2937', borderRadius: '0.75rem',
                                padding: '2rem', maxWidth: '28rem', width: '90vw',
                                border: '1px solid #374151'
                            }}>
                                <h2 style={{
                                    fontSize: '1.25rem', fontWeight: '600',
                                    color: '#ffffff', textAlign: 'center',
                                    margin: '0 0 1rem 0'
                                }}>
                                    {selectedProduct.name} - Select Template Size
                                </h2>
                                <p style={{
                                    fontSize: '0.875rem', color: '#9ca3af',
                                    textAlign: 'center', margin: '0 0 2rem 0'
                                }}>
                                    Choose the specific template size for your full colour transfers.
                                </p>

                                {/* Template Sizes */}
                                <div style={{
                                    backgroundColor: '#374151', borderRadius: '0.5rem',
                                    padding: '1.5rem', marginBottom: '2rem'
                                }}>
                                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '0.75rem' }}>
                                        {['A3', 'A4', 'A5', 'A6'].map((size, index) => (
                                            <button
                                                key={size}
                                                style={{
                                                    padding: '1rem 0.5rem',
                                                    backgroundColor: index === 0 ? '#7c3aed' : '#4b5563',
                                                    color: '#ffffff', borderRadius: '0.5rem',
                                                    border: index === 0 ? '2px solid #8b5cf6' : '1px solid #6b7280',
                                                    cursor: 'pointer', fontSize: '0.875rem',
                                                    fontWeight: '600', textAlign: 'center'
                                                }}
                                            >
                                                <div>{size}</div>
                                                <div style={{ fontSize: '0.75rem', fontWeight: '400', marginTop: '0.25rem' }}>
                                                    {size === 'A3' ? '297√ó420mm' : 
                                                     size === 'A4' ? '210√ó297mm' :
                                                     size === 'A5' ? '148√ó210mm' : '105√ó148mm'}
                                                </div>
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                {/* Action Buttons */}
                                <div style={{ display: 'flex', gap: '1rem' }}>
                                    <button
                                        onClick={() => setIsModalOpen(false)}
                                        className="btn btn-secondary"
                                        style={{ flex: 1 }}
                                    >
                                        ‚Üê Back to Product Selection
                                    </button>
                                    <button
                                        onClick={handleConfirm}
                                        className="btn btn-primary"
                                        style={{ flex: 1 }}
                                    >
                                        Continue
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </>
            );
        }

        function GarmentColorSelection({ onColorSelected }) {
            const [selectedColor, setSelectedColor] = useState(null);

            const handleColorSelect = (colorId) => {
                setSelectedColor(colorId);
            };

            const handleConfirm = () => {
                if (selectedColor) {
                    onColorSelected(selectedColor);
                }
            };

            return (
                <div className="modal-overlay">
                    <div className="modal-content" style={{ maxWidth: '48rem' }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '2rem' }}>
                            <div>
                                <h2 style={{ fontSize: '1.5rem', fontWeight: '600', color: '#ffffff', margin: '0 0 0.5rem 0' }}>
                                    üé® Select Garment Color <span style={{ color: '#ef4444' }}>*Required</span>
                                </h2>
                                <p style={{ fontSize: '0.875rem', color: '#9ca3af', margin: 0 }}>
                                    Choose a garment color for your Full Colour Transfer design. This will be the background color for your artwork.
                                </p>
                            </div>
                        </div>

                        {/* Warning */}
                        <div style={{
                            backgroundColor: '#fef3c7', border: '1px solid #f59e0b',
                            borderRadius: '0.5rem', padding: '1rem', marginBottom: '2rem'
                        }}>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.5rem' }}>
                                <span style={{ fontSize: '1rem' }}>‚ö†Ô∏è</span>
                                <span style={{ fontSize: '0.875rem', fontWeight: '600', color: '#92400e' }}>
                                    Please select a garment color to continue
                                </span>
                            </div>
                            <p style={{ fontSize: '0.875rem', color: '#92400e', margin: 0 }}>
                                Choose from the professional colors below or create a custom CMYK color
                            </p>
                        </div>

                        {/* Professional Colors */}
                        <div style={{ marginBottom: '2rem' }}>
                            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#ffffff', margin: '0 0 1rem 0' }}>
                                Professional Colors
                            </h3>
                            
                            <div className="color-grid">
                                {PROFESSIONAL_COLORS.map((color) => (
                                    <div
                                        key={color.id}
                                        onClick={() => handleColorSelect(color.id)}
                                        className={`color-swatch ${selectedColor === color.id ? 'selected' : ''}`}
                                        style={{ backgroundColor: color.color }}
                                        title={color.name}
                                    />
                                ))}
                            </div>
                        </div>

                        {/* Selected Color */}
                        <div style={{ marginBottom: '2rem' }}>
                            <div style={{ fontSize: '1rem', fontWeight: '600', color: '#ffffff', marginBottom: '0.5rem' }}>
                                Selected: {selectedColor ? (
                                    <span style={{ color: '#22c55e' }}>
                                        {PROFESSIONAL_COLORS.find(c => c.id === selectedColor)?.name}
                                    </span>
                                ) : (
                                    <span style={{ color: '#ef4444' }}>None selected</span>
                                )}
                            </div>
                        </div>

                        {/* Action Buttons */}
                        <div style={{ display: 'flex', gap: '1rem' }}>
                            <button className="btn btn-secondary" style={{ flex: 1 }}>
                                ‚Üê Back to Template Size
                            </button>
                            <button
                                onClick={handleConfirm}
                                disabled={!selectedColor}
                                className="btn btn-success"
                                style={{
                                    flex: 1,
                                    backgroundColor: selectedColor ? '#22c55e' : '#6b7280',
                                    cursor: selectedColor ? 'pointer' : 'not-allowed',
                                    opacity: selectedColor ? 1 : 0.5
                                }}
                            >
                                Continue to Canvas
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        function CanvasEditor({ templateSize = 'A3', garmentColor, onPDFGenerate }) {
            const [logoFile, setLogoFile] = useState(null);
            const [logoUrl, setLogoUrl] = useState('');
            const [logoPosition, setLogoPosition] = useState({ x: 50, y: 50 });
            const [logoScale, setLogoScale] = useState(100);
            const [logoRotation, setLogoRotation] = useState(0);
            const [canvasZoom, setCanvasZoom] = useState(100);
            const [showColorWarning, setShowColorWarning] = useState(false);
            const fileInputRef = useRef(null);

            const handleLogoUpload = (event) => {
                const file = event.target.files?.[0];
                if (file) {
                    setLogoFile(file);
                    const url = URL.createObjectURL(file);
                    setLogoUrl(url);
                    
                    if (file.name.toLowerCase().includes('png') || file.name.toLowerCase().includes('jpg')) {
                        setShowColorWarning(true);
                    }
                }
            };

            const getTemplateDimensions = () => {
                switch (templateSize) {
                    case 'A3': return { width: 420, height: 297 };
                    case 'A4': return { width: 297, height: 210 };
                    case 'A5': return { width: 210, height: 148 };
                    case 'A6': return { width: 148, height: 105 };
                    default: return { width: 420, height: 297 };
                }
            };

            const templateDims = getTemplateDimensions();

            return (
                <>
                    {/* Top Toolbar */}
                    <div className="toolbar">
                        <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>
                            <button
                                onClick={() => fileInputRef.current?.click()}
                                className="btn btn-primary"
                            >
                                üìÅ Upload Logo
                            </button>
                            <input
                                ref={fileInputRef}
                                type="file"
                                accept="image/*,.svg,.pdf"
                                style={{ display: 'none' }}
                                onChange={handleLogoUpload}
                            />
                            
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                                <span style={{ color: '#9ca3af', fontSize: '0.875rem' }}>Grid:</span>
                                <button className="btn btn-secondary">Guides</button>
                                <button className="btn btn-secondary">Rulers</button>
                            </div>

                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                                <span style={{ color: '#9ca3af', fontSize: '0.875rem' }}>Zoom: {canvasZoom}%</span>
                                <input
                                    type="range"
                                    min="25"
                                    max="200"
                                    value={canvasZoom}
                                    onChange={(e) => setCanvasZoom(parseInt(e.target.value))}
                                    className="range-input"
                                    style={{ width: '100px' }}
                                />
                            </div>
                        </div>

                        <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>
                            <button onClick={onPDFGenerate} className="btn btn-success">
                                Generate PDF
                            </button>
                            <button className="btn" style={{ backgroundColor: '#ef4444', color: '#ffffff' }}>
                                Save Project
                            </button>
                        </div>
                    </div>

                    {/* Canvas */}
                    <div style={{ display: 'flex', flex: 1 }}>
                        <div className="canvas-area">
                            <div
                                className="gang-sheet"
                                style={{
                                    width: `${templateDims.width * (canvasZoom / 100)}px`,
                                    height: `${templateDims.height * (canvasZoom / 100)}px`,
                                }}
                            >
                                {/* Template Size Label */}
                                <div style={{
                                    position: 'absolute', top: '-2rem', left: '0',
                                    color: '#ffffff', fontSize: '0.875rem', fontWeight: '600',
                                    backgroundColor: '#1f2937', padding: '0.25rem 0.5rem',
                                    borderRadius: '0.25rem'
                                }}>
                                    {templateSize} ({templateDims.width}√ó{templateDims.height}mm)
                                </div>

                                {/* Safety Color Warning */}
                                {showColorWarning && (
                                    <div className="safety-warning">
                                        <div style={{ fontSize: '1rem', fontWeight: '600', color: '#f59e0b', marginBottom: '0.5rem' }}>
                                            Safety Color Warning
                                        </div>
                                        <p style={{ fontSize: '0.875rem', margin: '0 0 1rem 0', lineHeight: '1.4' }}>
                                            Your display shows different colors from how they appear on final transfer.
                                        </p>
                                        <button
                                            onClick={() => setShowColorWarning(false)}
                                            className="btn"
                                            style={{ backgroundColor: '#f59e0b', color: '#ffffff' }}
                                        >
                                            I understand
                                        </button>
                                    </div>
                                )}

                                {/* Logo Display */}
                                {logoUrl && (
                                    <img
                                        src={logoUrl}
                                        alt="Logo"
                                        style={{
                                            position: 'absolute',
                                            left: `${logoPosition.x}%`,
                                            top: `${logoPosition.y}%`,
                                            transform: `translate(-50%, -50%) scale(${logoScale / 100}) rotate(${logoRotation}deg)`,
                                            maxWidth: '200px',
                                            maxHeight: '200px',
                                            cursor: 'move',
                                            border: '2px dashed #3b82f6',
                                            padding: '4px',
                                            backgroundColor: 'rgba(255, 255, 255, 0.8)'
                                        }}
                                    />
                                )}
                            </div>
                        </div>

                        {/* Properties Panel */}
                        <div className="properties-panel">
                            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#ffffff', margin: '0 0 1.5rem 0' }}>
                                Logo Properties
                            </h3>

                            {logoUrl ? (
                                <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>
                                    {/* Logo Preview */}
                                    <div style={{ padding: '1rem', backgroundColor: '#374151', borderRadius: '0.5rem', textAlign: 'center' }}>
                                        <img
                                            src={logoUrl}
                                            alt="Logo preview"
                                            style={{ maxWidth: '100px', maxHeight: '100px', border: '1px solid #6b7280', borderRadius: '0.25rem' }}
                                        />
                                        <div style={{ fontSize: '0.875rem', color: '#9ca3af', marginTop: '0.5rem' }}>
                                            {logoFile?.name}
                                        </div>
                                    </div>

                                    {/* Position */}
                                    <div>
                                        <label style={{ fontSize: '0.875rem', fontWeight: '600', color: '#ffffff', marginBottom: '0.5rem', display: 'block' }}>
                                            Position
                                        </label>
                                        <div style={{ display: 'flex', gap: '0.5rem' }}>
                                            <div style={{ flex: 1 }}>
                                                <label style={{ fontSize: '0.75rem', color: '#9ca3af' }}>X: {logoPosition.x}%</label>
                                                <input
                                                    type="range"
                                                    min="0"
                                                    max="100"
                                                    value={logoPosition.x}
                                                    onChange={(e) => setLogoPosition(prev => ({ ...prev, x: parseInt(e.target.value) }))}
                                                    className="range-input"
                                                />
                                            </div>
                                            <div style={{ flex: 1 }}>
                                                <label style={{ fontSize: '0.75rem', color: '#9ca3af' }}>Y: {logoPosition.y}%</label>
                                                <input
                                                    type="range"
                                                    min="0"
                                                    max="100"
                                                    value={logoPosition.y}
                                                    onChange={(e) => setLogoPosition(prev => ({ ...prev, y: parseInt(e.target.value) }))}
                                                    className="range-input"
                                                />
                                            </div>
                                        </div>
                                    </div>

                                    {/* Scale */}
                                    <div>
                                        <label style={{ fontSize: '0.875rem', fontWeight: '600', color: '#ffffff', marginBottom: '0.5rem', display: 'block' }}>
                                            Scale: {logoScale}%
                                        </label>
                                        <input
                                            type="range"
                                            min="25"
                                            max="300"
                                            value={logoScale}
                                            onChange={(e) => setLogoScale(parseInt(e.target.value))}
                                            className="range-input"
                                        />
                                    </div>

                                    {/* Rotation */}
                                    <div>
                                        <label style={{ fontSize: '0.875rem', fontWeight: '600', color: '#ffffff', marginBottom: '0.5rem', display: 'block' }}>
                                            Rotation: {logoRotation}¬∞
                                        </label>
                                        <input
                                            type="range"
                                            min="0"
                                            max="360"
                                            value={logoRotation}
                                            onChange={(e) => setLogoRotation(parseInt(e.target.value))}
                                            className="range-input"
                                        />
                                        <div style={{ display: 'flex', gap: '0.5rem', marginTop: '0.5rem' }}>
                                            <button
                                                onClick={() => setLogoRotation(0)}
                                                className="btn btn-secondary"
                                                style={{ flex: 1, fontSize: '0.75rem' }}
                                            >
                                                Reset
                                            </button>
                                            <button
                                                onClick={() => setLogoRotation(prev => prev + 90)}
                                                className="btn btn-secondary"
                                                style={{ flex: 1, fontSize: '0.75rem' }}
                                            >
                                                +90¬∞
                                            </button>
                                        </div>
                                    </div>

                                    {/* Quick Actions */}
                                    <div>
                                        <label style={{ fontSize: '0.875rem', fontWeight: '600', color: '#ffffff', marginBottom: '0.5rem', display: 'block' }}>
                                            Quick Actions
                                        </label>
                                        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>
                                            <button
                                                onClick={() => {
                                                    setLogoPosition({ x: 50, y: 50 });
                                                    setLogoScale(100);
                                                    setLogoRotation(0);
                                                }}
                                                className="btn btn-primary"
                                            >
                                                Center Logo
                                            </button>
                                            <button className="btn btn-secondary">
                                                Fit to Bounds
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ) : (
                                <div style={{ textAlign: 'center', color: '#9ca3af', padding: '2rem 0' }}>
                                    <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>üìÅ</div>
                                    <p>Upload a logo to see properties</p>
                                </div>
                            )}

                            {/* Layers Panel */}
                            <div style={{
                                marginTop: '2rem', padding: '1rem', backgroundColor: '#374151', borderRadius: '0.5rem'
                            }}>
                                <h4 style={{ fontSize: '1rem', fontWeight: '600', color: '#ffffff', margin: '0 0 1rem 0' }}>
                                    Layers (0)
                                </h4>
                                <div style={{ fontSize: '0.875rem', color: '#9ca3af', textAlign: 'center', padding: '1rem 0' }}>
                                    No layers yet
                                </div>
                            </div>
                        </div>
                    </div>
                </>
            );
        }

        function ArtworkUploaderApp() {
            const [appState, setAppState] = useState('product-selection');
            const [currentStep, setCurrentStep] = useState(0);
            
            // Project state
            const [selectedProduct, setSelectedProduct] = useState('');
            const [selectedTemplate, setSelectedTemplate] = useState('A3');
            const [selectedGarmentColor, setSelectedGarmentColor] = useState('');

            const handleProductSelected = (productId) => {
                setSelectedProduct(productId);
                setAppState('template-selection');
                setCurrentStep(1);
            };

            const handleColorSelected = (colorId) => {
                setSelectedGarmentColor(colorId);
                setAppState('canvas-editor');
                setCurrentStep(2);
            };

            const handleStepClick = (step) => {
                setCurrentStep(step);
                switch (step) {
                    case 0:
                        setAppState('product-selection');
                        break;
                    case 1:
                        setAppState('template-selection');
                        break;
                    case 2:
                        setAppState('color-selection');
                        break;
                    case 3:
                    case 4:
                        setAppState('canvas-editor');
                        break;
                }
            };

            const handlePDFGenerate = () => {
                console.log('Generating PDF...', {
                    product: selectedProduct,
                    template: selectedTemplate,
                    color: selectedGarmentColor
                });
            };

            // Show product selection modal
            if (appState === 'product-selection') {
                return React.createElement(ProductSelection, { onProductSelected: handleProductSelected });
            }

            // Show template selection with color selection
            if (appState === 'template-selection') {
                return React.createElement(GarmentColorSelection, { onColorSelected: handleColorSelected });
            }

            // Show color selection
            if (appState === 'color-selection') {
                return React.createElement(GarmentColorSelection, { onColorSelected: handleColorSelected });
            }

            // Main application layout with sidebar and canvas
            return (
                <div style={{
                    display: 'flex',
                    height: '100vh',
                    backgroundColor: '#111827',
                    fontFamily: 'system-ui, -apple-system, sans-serif'
                }}>
                    {/* Sidebar */}
                    {React.createElement(Sidebar, { 
                        currentStep: currentStep, 
                        onStepClick: handleStepClick 
                    })}

                    {/* Main Content Area */}
                    <div style={{ flex: 1, display: 'flex', flexDirection: 'column' }}>
                        {/* Workflow Steps Header */}
                        {React.createElement(WorkflowSteps, { currentStep: currentStep })}

                        {/* Canvas Editor */}
                        {React.createElement(CanvasEditor, {
                            templateSize: selectedTemplate,
                            garmentColor: selectedGarmentColor,
                            onPDFGenerate: handlePDFGenerate
                        })}
                    </div>
                </div>
            );
        }

        ReactDOM.render(React.createElement(ArtworkUploaderApp), document.getElementById('root'));
    </script>
</body>
</html>